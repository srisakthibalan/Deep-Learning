import pandas as pd
import numpy as np
import seaborn as sns
import plotly.express as px
import matplotlib.pyplot as plt

data=pd.read_csv("/content/INSTAMART_fin_part1.csv")

data.shape

data.columns

plt.figure(figsize=(12,10))
plt.hist(x=data['reorder_ratio'], bins=20)
plt.title('Distribution of Reorder Rate by Users', fontsize=15)
plt.xlabel('Reorder Rate',fontsize=12)
plt.ylabel('Number of users', fontsize=12)
plt.show()

data['department'].value_counts()/data['department'].value_counts().sum()*100.

plt.figure(figsize=(15,15))

temp_series=data['department'].value_counts()
labels=(np.array(temp_series.index))
size=(np.array((temp_series/temp_series.sum())*100))
plt.pie(size,labels=labels,autopct='%1.1f%%',startangle=500)
plt.show()


# average reorder for department wise
dept_fig=data.groupby(['department'])['reordered'].agg("mean").sort_values(ascending=False).reset_index()
dept_fig

plt.figure(figsize=(15,5))
sns.pointplot(x='department', y='reordered', data=dept_fig,alpha=0.9, color='red')
plt.ylabel('Reorder ratio', fontsize=12)
plt.xlabel('Department', fontsize=12)
plt.title("Department wise reorder ratio", fontsize=15)
plt.xticks(rotation='vertical')
plt.show()

grouped = data.groupby('days_since_prior_order')['reordered'].agg(['count']).reset_index()

gp=data.loc[data['days_since_prior_order'].notnull()]
plt.figure(figsize=(12,10))
sns.countplot(x=gp.days_since_prior_order,data=gp,alpha=0.9, color='greenYellow')
plt.xticks(rotation='vertical')
plt.xlabel('Days since prior order', fontsize=12)
plt.ylabel('count', fontsize=12)
plt.title("Distribution of Days since prior order", fontsize=15)

new=data.groupby('product_name')['add_to_cart_order'].sum().sort_values(ascending = False).reset_index()[0:12]


# Which products are frequently ordered
plt.figure(figsize=(12,6))
sns.barplot(data = new,x = 'add_to_cart_order', y = 'product_name', palette = 'Set2')
plt.ylabel('Item', fontsize=12)
plt.xlabel('Top 12 Products Added to Cart', fontsize=12)
plt.title('Most frequently ordered products', fontsize=13)
plt.show();